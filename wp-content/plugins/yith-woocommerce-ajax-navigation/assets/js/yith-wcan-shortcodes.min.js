(()=>{"use strict";var e={d:(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{$:()=>i});var i=jQuery;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"xhr",null),r(this,"doingAjax",!1),r(this,"originalSearch",location.search),r(this,"initialized",!1),r(this,"filtered",!1),this.initPopState(),this.initialized=!0}var l,s,o;return l=e,(s=[{key:"initPopState",value:function(){this.pushUrlToHistory(window.location,document.title,null,!0),i(window).on("popstate",(function(){var e;null!==(e=window.history.state)&&void 0!==e&&e._yithWcan&&window.location.reload(!0)}))}},{key:"doFilter",value:function(e,t,a){var n,r,l=this,s=i(t||"body");return(r=i(document).triggerHandler("yith_wcan_filters_parameters",[e]))&&(e=r),s&&this.block(s),n=this.buildUrl(e),yith_wcan_shortcodes.ajax_filters?(this.doingAjax=!0,this._doAjax(n).done((function(i){n=l.searchAlternativeUrl(i,n),l._beforeFilter(i,e),l.refreshFragments(t,a,i),l.pushUrlToHistory(n,i.pageTitle,e),l.originalSearch=location.search,s&&l.unblock(s),l._afterFilter(i,e),l.doingAjax=!1}))):(this.pushUrlToHistory(n,document.title,e),void(window.location=n))}},{key:"_beforeFilter",value:function(e,t){i(document).trigger("yith-wcan-ajax-loading",[e,t])}},{key:"_afterFilter",value:function(e,a){i(".woocommerce-ordering").on("change","select.orderby",(function(){i(this).closest("form").submit()})),this.filtered=a&&!!Object.keys(a).length,this.filtered?t.$body.addClass("filtered"):t.$body.removeClass("filtered"),i(window).trigger("scroll"),i(document).trigger("yith-wcan-ajax-filtered",[e,a]).trigger("yith_wcwl_reload_fragments")}},{key:"buildUrl",value:function(e){var t,n=this,r=yith_wcan_shortcodes.query_param,l={},s=window.location,o=yith_wcan_shortcodes.base_url?yith_wcan_shortcodes.base_url:(null==s?void 0:s.origin)+(null==s?void 0:s.pathname),c=this,h="object"===a(e)&&Object.keys(e).length;if(yith_wcan_shortcodes.session_param&&(o=o.replace(new RegExp("/"+yith_wcan_shortcodes.session_param+"/[^/]*/"),"")),h&&(l[r]=1),this.originalSearch){var d=this.originalSearch.replace("?","").split("&").reduce((function(e,t){var i=t.split("=");if(2===i.length){if(n.isFilterParam(i[0]))return e;e[i[0]]=i[1]}return e}),{});l=i.extend(l,d)}return h&&(l=i.extend(l,e)),(t=Object.keys(l).reduce((function(e,t){var i=l[t];return i&&t?e+=c._cleanParam(t)+"="+c._cleanParam(i)+"&":e}),"?").replace(/&$/g,"").replace(/%2B/g,"+").replace(/%2C/g,",")).length>1&&(o+=t),o}},{key:"searchAlternativeUrl",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=i;return-1===e.indexOf("yith_wcan:sharing_url")?a:a=(t=e.match(/<meta name="yith_wcan:sharing_url" content="([^"]*)">/))&&1 in t?t[1]:a}},{key:"pushUrlToHistory",value:function(e,t,i,a){if(yith_wcan_shortcodes.change_browser_url&&!navigator.userAgent.match(/msie/i)){var n="pushState";a&&(n="replaceState"),window.history[n]({_yithWcan:!0,pageTitle:t,filters:i},"",e)}}},{key:"refreshFragments",value:function(e,t,a){var n=document.createElement("html"),r=i(n);if(n.innerHTML=a,e){var l,s=i(t),o=i(e);s.length&&(l=r.find(t)).length&&s.replaceWith(l.first()),o.length&&(l=r.find(e)).length&&o.replaceWith(l.first())}else{var c=i(yith_wcan_shortcodes.content);c.length?c.replaceWith(r.find(yith_wcan_shortcodes.content)):i("body").replaceWith(r.find("body"))}i(document).trigger("yith_wcan_init_shortcodes")}},{key:"_cleanParam",value:function(e){var t,i;return null===(t=yith_wcan_shortcodes)||void 0===t||!t.process_sanitize||null!==(i=yith_wcan_shortcodes)&&void 0!==i&&i.skip_sanitize?e:encodeURIComponent(e)}},{key:"_doAjax",value:function(e,t){return this.xhr&&this.xhr.abort(),t=i.extend({url:e,headers:{"X-YITH-WCAN":1}},t),this.xhr=i.ajax(t),this.xhr}},{key:"block",value:function(e){var t;if(void 0!==i.fn.block){var a="#fff center center no-repeat";null!==(t=yith_wcan_shortcodes)&&void 0!==t&&t.loader&&(a="url('".concat(yith_wcan_shortcodes.loader,"') ").concat(a)),e.block({message:null,overlayCSS:{background:a,opacity:.7}})}}},{key:"unblock",value:function(e){void 0!==i.fn.unblock&&e.unblock()}},{key:"isFilterParam",value:function(e){var t,a=["rating_filter","min_price","max_price","price_ranges","onsale_filter","instock_filter","featured_filter","orderby","product-page",yith_wcan_shortcodes.query_param];return(t=i(document).triggerHandler("yith_wcan_supported_filters_parameters",[a]))&&(a=t),-1!==(a=a.concat(yith_wcan_shortcodes.supported_taxonomies.map((function(e){return e.replace("pa_","filter_")})))).indexOf(e)||-1!==e.indexOf("filter_")||-1!==e.indexOf("query_type_")}}])&&n(l.prototype,s),o&&n(l,o),e}();var s=function e(t){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=null,(n="$reset")in(a=this)?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,this.$reset=t,this.$reset.on("click",(function(e){e.preventDefault(),i(".yith-wcan-filters").each((function(){var e=i(this).data("preset");e.deactivateAllFilters(!0),e.closeModal()}))})),this.$reset.data("reset",this).addClass("enhanced")};function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=function(){function e(t,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"$originalSelect",null),d(this,"$_main",null),d(this,"$_label",null),d(this,"$_dropdown",null),d(this,"$_search",null),d(this,"$_showMore",null),d(this,"$_items",null),d(this,"currentPage",1),d(this,"options",{}),this.$originalSelect=t,this.$originalSelect.is("select")){var n=this.$originalSelect.data("per_page"),r=this.$originalSelect.data("order"),l=this.$originalSelect.data("all-label"),s={showSearch:this.$originalSelect.data("show_search"),paginate:this.$originalSelect.data("paginate"),perPage:n||10,order:r||"ASC",getElements:null,labels:{emptyLabel:l||yith_wcan_shortcodes.labels.empty_option,searchPlaceholder:yith_wcan_shortcodes.labels.search_placeholder,noItemsFound:yith_wcan_shortcodes.labels.no_items,showMore:yith_wcan_shortcodes.labels.show_more}};this.options=i.extend(s,a),this._hideSelect(),this._initTemplate(),this._initActions(),this.$originalSelect.data("dropdown",this).addClass("enhanced")}}var t,a,n;return t=e,(a=[{key:"_hideSelect",value:function(){this.$originalSelect.hide()}},{key:"_initTemplate",value:function(){var e=i("<div/>",{class:"yith-wcan-dropdown closed"}),t=i("<div/>",{class:"dropdown-label",html:this.getLabel()}),a=i("<div>",{class:"dropdown-wrapper"}),n=i("<ul/>",{class:"matching-items filter-items"});a.append(n),e.append(t).append(a),this.options.showSearch&&this._initSearchTemplate(a),this.options.paginate&&this._initShowMoreTemplate(a),this.$originalSelect.after(e),this.$_main=e,this.$_label=t,this.$_dropdown=a,this.$_items=n}},{key:"_initSearchTemplate",value:function(e){var t=i("<div/>",{class:"search-field-container"}),a=i("<input/>",{name:"s",class:"search-field",type:"search",placeholder:this.options.labels.searchPlaceholder});t.append(a).prependTo(e),this.$_search=a}},{key:"_initShowMoreTemplate",value:function(e){var t=i("<a/>",{class:"show-more",text:this.options.labels.showMore.replace("%d",this.options.perPage)});t.on("click",this.loadNextPage.bind(this)).hide(),e.append(t),this.$_showMore=t}},{key:"_initActions",value:function(){var e,t,a=this;null===(e=this.$_main)||void 0===e||e.on("click",(function(e){e.stopPropagation(),a.toggleDropdown()})),this.$_dropdown.on("click",(function(e){e.stopPropagation()})),null===(t=this.$_search)||void 0===t||t.on("keyup search",(function(){a._populateItems()})),this.$_items.on("change",":input",(function(){var e,t=i(this).closest("li"),n=t.data("value");if(t.hasClass("disabled")&&!a.isValueSelected(n))return!1;t.toggleClass("active"),e=t.hasClass("active"),a._changeItemStatus(n,e)})),this.$_items.on("click","li:not(.checkbox) a",(function(e){var t,n=i(this).closest("li"),r=n.data("value");if(e.preventDefault(),n.hasClass("disabled")&&!a.isValueSelected(r))return!1;n.toggleClass("active"),(t=n.hasClass("active"))&&n.siblings().removeClass("active"),a._changeItemStatus(r,t)})),this.$_items.on("click","label > a",(function(e){var t=i(this).parent().find(":input");e.preventDefault(),(t.is('[type="radio"]')||t.is('[type="checkbox"]'))&&t.prop("checked",!t.prop("checked")),t.change()})),this.$originalSelect.on("change",(function(e,t){t||(a.$_items.find("li").each((function(){var e=i(this).data("value");a.isValueSelected(e)?a._selectItem(e):a._deselectItem(e)})),a.updateLabel())})),i(document).on("click",this.closeDropdown.bind(this))}},{key:"openDropdown",value:function(){var e;null===(e=this.$_main)||void 0===e||e.addClass("open").removeClass("closed"),this._afterDropdownOpen()}},{key:"closeDropdown",value:function(){var e;null===(e=this.$_main)||void 0===e||e.removeClass("open").addClass("closed")}},{key:"_closeOtherDropdowns",value:function(){var e=this;i(document).find("select.enhanced").filter((function(t,a){var n=i(a);return!!n.data("dropdown")&&!n.is(e.$originalSelect)})).each((function(){i(this).data("dropdown").closeDropdown()}))}},{key:"toggleDropdown",value:function(){var e,t;null===(e=this.$_main)||void 0===e||e.toggleClass("open").toggleClass("closed"),null!==(t=this.$_main)&&void 0!==t&&t.hasClass("open")&&this._afterDropdownOpen()}},{key:"_afterDropdownOpen",value:function(){var e;this._closeOtherDropdowns(),null!==(e=this.$_search)&&void 0!==e&&e.length&&this.$_search.val(""),this._populateItems()}},{key:"getMatchingElements",value:function(e,t){var a=this,n=[],r=this.getOptions();return new Promise((function(l){r.each((function(){var t=i(this),a=t.val(),r=t.html(),l=new RegExp(".*"+e+".*","i");(!e||l.test(a)||l.test(r))&&n.push({value:a,label:r})})),a.options.getElements?a.options.getElements(e).then((function(e){e&&(e=e.reduce((function(e,t,i){return e.push({label:i,value:t}),e}),[]),n=i.extend(n,e)),l(a._formatItems(n,t))})):l(a._formatItems(n,t))}))}},{key:"_formatItems",value:function(e,t){var i=this,a=[],n=!1;return e.filter((function(e){return-1===a.indexOf(e.value)&&(a.push(e.value),!0)})).sort((function(e,t){var a="ASC"===i.options.order?1:-1;return e.value<t.value?-1*a:e.value>t.value?a:0})),t&&(n=t<Object.keys(e).length,e=e.slice(0,t)),{items:e,hasMore:n}}},{key:"_generateItem",value:function(e,t){var a,n=this.isValueSelected(e),r=this.getOptionByValue(e),l=i("<li/>",{"data-value":e,class:r.length?r.attr("class"):""});if(r.length){var s=r.data("template"),o=r.data("count");t=s||t,o&&(t+=o)}if(a=i("<a/>",{href:r.length?r.data("filter_url"):"#",html:t,"data-title":r.length?r.data("title"):""}),this.$originalSelect.prop("multiple")){var c=i("<input/>",{type:"checkbox",value:e}),h=i("<label>");c.prop("checked",n),h.prepend(c).append(a),l.append(h).addClass("checkbox")}else l.append(a);return n?l.addClass("active"):l.removeClass("active"),l}},{key:"_populateItems",value:function(e){var t,a,n=this,r=null!==(t=this.$_search)&&void 0!==t&&t.length?this.$_search.val():"",l=this.options.paginate?this.options.perPage:0;a=(e=e?parseInt(e):1)*l,this.getMatchingElements(r,a).then((function(t){var a=t.items,r=[],l=!1;if(n._emptyItems(),n._hideLoadMore(),a.length){var s,c=o(a);try{for(c.s();!(s=c.n()).done;){var h=s.value;""===h.value?r.unshift(n._generateItem(h.value,h.label)):r.push(n._generateItem(h.value,h.label))}}catch(e){c.e(e)}finally{c.f()}n.currentPage=e,l=t.hasMore}else r.push(i("<li/>",{text:n.options.labels.noItemsFound})),n.currentPage=1;n.$_items.append(r),i(document).trigger("yith_wcan_dropdown_updated"),l&&n._showLoadMore()}))}},{key:"loadNextPage",value:function(){var e=this.currentPage+1;this._populateItems(e)}},{key:"_selectItem",value:function(e){return this._changeItemStatus(e,!0)}},{key:"_deselectItem",value:function(e){return this._changeItemStatus(e,!1)}},{key:"_changeItemStatus",value:function(e,t){var i=this.$originalSelect.find('option[value="'.concat(e,'"]'));return!!i.length&&(i.prop("selected",t),this.closeDropdown(),this.updateLabel(),this.$originalSelect.trigger("change",[!0]),!0)}},{key:"_emptyItems",value:function(){this.$_items.html("")}},{key:"_showLoadMore",value:function(){this.$_showMore.show()}},{key:"_hideLoadMore",value:function(){this.$_showMore.hide()}},{key:"getLabel",value:function(){return this.hasSelectedValues()?this.getSelectedLabels().join(", "):this.options.labels.emptyLabel}},{key:"updateLabel",value:function(){var e,t=this.getLabel();null===(e=this.$_label)||void 0===e||e.html(t)}},{key:"getOptions",value:function(){return this.$originalSelect.find("option")}},{key:"hasSelectedValues",value:function(){return this.getSelectedOptions().length}},{key:"isValueSelected",value:function(e){return-1!==this.getSelectedValues().indexOf(e.toString())}},{key:"getSelectedOptions",value:function(){return this.$originalSelect.find("option").filter(":selected")}},{key:"getOptionByValue",value:function(e){return this.$originalSelect.find('option[value="'.concat(e,'"]'))}},{key:"getSelectedLabels",value:function(){var e=[];return this.getSelectedOptions().each((function(){var t=i(this),a=t.data("template");a=a||t.html().replace(/\([0-9]*\)/,""),e.push(a)})),e}},{key:"getSelectedValues",value:function(){var e=[];return this.getSelectedOptions().each((function(){e.push(i(this).val())})),e}},{key:"destroy",value:function(){}}])&&h(t.prototype,a),n&&h(t,n),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"preset",!1),v(this,"$preset",!1),v(this,"target",!1),v(this,"$target",!1),v(this,"$filters",!1),v(this,"$filterButtons",!1),v(this,"modalElements",{}),v(this,"activeFilters",!1),v(this,"isMobile",!1),v(this,"sliderTimeout",!1),v(this,"originalFilters",null),v(this,"dirty",!1),this.preset="#"+t.attr("id"),this.$preset=t,this.target=this.$preset.data("target"),this.$target=!!this.target&&i(this.target),this._regiterStatus(),this._initFilterButton(),this._initResponsive(),this._initFilters(),this._initActions(),this.$preset.data("preset",this).addClass("enhanced").trigger("yith_wcan_preset_initialized",[this])}var t,a,n;return t=e,(a=[{key:"_initFilters",value:function(){var e=this;this.getFilters().each((function(){var t=i(this);e._initFilter(t)})),this.maybeShowClearAllFilters()}},{key:"_initFilterButton",value:function(){var e=this;this.$filterButtons=this.$preset.find(".apply-filters"),this.$filterButtons.length&&this.$filterButtons.on("click",(function(t){t.preventDefault(),e.filter()})).hide()}},{key:"_initActions",value:function(){this.$preset.find("form").on("submit",(function(e){e.preventDefault()}))}},{key:"_initResponsive",value:function(){var e=this;if(yith_wcan_shortcodes.modal_on_mobile){var t=window.matchMedia("(max-width: ".concat(yith_wcan_shortcodes.mobile_media_query,"px)"));i(window).on("resize",(function(){var i=!!t.matches;i!==e.isMobile&&(e.isMobile=i,e._afterLayoutChange())})).resize()}}},{key:"_initFilter",value:function(e){var t,a=this,n=function(t){var n=i(this),r=n.closest(".yith-wcan-filter"),l=!!r.length&&"yes"===r.data("multiple"),s=n.closest(".filter-item"),o=s.length?r.find(".filter-item").not(s):[];if(s.is(".disabled")&&!s.is(".active"))return t.preventDefault(),!1;t.preventDefault(),o.length&&!l&&o.removeClass("active").children("label").find(":input").prop("checked",!1).parent(".checked").removeClass("checked"),s.length&&s.toggleClass("active"),a.activeFilters=!1,a.maybeFilter(e),a.maybeToggleClearAllFilters(),a.maybeToggleClearFilter(r)};e.find(".filter-item").not(".checkbox").not(".radio").on("click","a",(function(e){var t=i(this).closest(".filter-item");if(!i(null==e?void 0:e.delegateTarget).is(t))return!1;n.call(this,e)})),e.find(":input").on("change",(function(e){var t=i(this),a=t.closest(".filter-item");if(a.is(".disabled")&&!a.is(".active"))return t.prop("checked",!1),!1;n.call(this,e)})),e.find("label > a").on("click",(function(e){var t=i(this),a=t.closest(".filter-item");if(e.preventDefault(),a.is(".disabled")&&!a.is(".active"))return!1;var n=t.parent().find(":input");(n.is('[type="radio"]')||n.is('[type="checkbox"]'))&&n.prop("checked",!n.prop("checked")),n.change()})),this._initTooltip(e),this._initPriceSlider(e),this._initDropdown(e),this._initCollapsable(e),this.maybeShowClearFilter(e),null!==(t=this.$preset)&&void 0!==t&&t.hasClass("custom-style")&&(this._initCustomInput(e),e.on("yith_wcan_dropdown_updated",(function(){var e=i(this).closest(".yith-wcan-filter");a._initCustomInput(e)})))}},{key:"_initTooltip",value:function(e,t){e.find("[data-title]").each((function(){var e=i(this);!e.hasClass("tooltip-added")&&e.data("title")&&(e.on("mouseenter",(function(){var e,a=i(this),n=null,r=a.outerWidth(),l=0;if(!t||"top"!==t&&"right"!==t){var s=a.closest(".filter-item");t=s.hasClass("color")||s.hasClass("label")?"top":"right"}n=i("<span>",{class:"yith-wcan-tooltip",html:a.data("title")}),a.append(n),e=n.outerWidth()+6,n.outerWidth(e),l="top"===t?(r-e)/2:r+15,n.css({left:l.toFixed(0)+"px"}).fadeIn(200),a.addClass("with-tooltip")})).on("mouseleave",(function(){var e=i(this);e.find(".yith-wcan-tooltip").fadeOut(200,(function(){e.removeClass("with-tooltip").find(".yith-wcan-tooltip").remove()}))})),e.addClass("tooltip-added"))}))}},{key:"_initDropdown",value:function(e){var t=e.find("select.filter-dropdown");t.length&&(t.hasClass("select2-hidden-accessible")&&void 0!==i.fn.selectWoo&&t.selectWoo("destroy"),this._initDropdownObject(t,{paginate:!0,perPage:yith_wcan_shortcodes.terms_per_page}))}},{key:"_initDropdownObject",value:function(e,t){return new u(e,t)}},{key:"_initPriceSlider",value:function(e){var t=this;if(e.hasClass("filter-price-slider")){var i=this,a=e.find(".price-slider"),n=a.find(".price-slider-min"),r=a.find(".price-slider-max"),l=parseFloat(a.data("min")),s=parseFloat(a.data("max")),o=parseFloat(n.val()),c=parseFloat(r.val()),h=parseFloat(a.data("step")),d=function(){i.sliderTimeout&&clearTimeout(i.sliderTimeout),i.sliderTimeout=setTimeout((function(){i.maybeFilter(e)}),200)};e.find(".price-slider-ui").ionRangeSlider({skin:"round",type:"double",min:l,max:s,step:h,from:o,to:c,min_interval:h,values_separator:" - ",prettify:function(e){return t.formatPrice(e)},onChange:function(e){n.val(e.from),r.val(e.to)},onFinish:d}),n.add(r).off("change").on("keyup",(function(){n.val()&&r.val()&&d()}))}}},{key:"_initCollapsable",value:function(e){this._initTitleCollapsable(e),this._initHierarchyCollapsable(e)}},{key:"_initTitleCollapsable",value:function(e){var t=e.find(".collapsable");t.length&&this._initToggle(t,t,e.find(".filter-content"))}},{key:"_initHierarchyCollapsable",value:function(e){var t=e.find(".hierarchy-collapsable");if(t.length){var a=this,n=e.find(".active");n.length&&(n.parents(".hierarchy-collapsable").removeClass("closed").addClass("opened"),n.hasClass("hierarchy-collapsable")&&yith_wcan_shortcodes.show_current_children&&n.removeClass("closed").addClass("opened")),t.each((function(){var e=i(this),t=i("<span/>",{class:"toggle-handle"});t.appendTo(e),a._initToggle(t,e,e.children("ul.filter-items"))}))}}},{key:"_initToggle",value:function(e,t,i){t.hasClass("closed")&&i.hide(),e.off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),i.slideToggle(400,(function(){t.toggleClass("opened").toggleClass("closed")}))}))}},{key:"_initCustomInput",value:function(e){e.find(":input").each((function(){var e,t=i(this),a=t.attr("type"),n="".concat(a,"button");"checkbox"!==a&&"radio"!==a||t.closest(".".concat(n)).length||(t.is(":checked")&&(n+=" checked"),e=i("<span/>",{class:n}),t.wrap(e).on("change",(function(){var e=i(this);e.prop("checked")?e.parent().addClass("checked"):e.parent().removeClass("checked")})))}))}},{key:"_regiterStatus",value:function(){this.originalFilters=this.getFiltersProperties()}},{key:"_afterLayoutChange",value:function(){var e,t;this.isMobile?(this.$preset.addClass("filters-modal").attr("role","dialog").attr("tabindex","-1").hide(),this._addCloseModalButton(),this._addApplyFiltersModalButton(),this._switchToCollapsables(),null===(e=this.$filterButtons)||void 0===e||e.hide()):(this.$preset.removeClass("filters-modal").removeClass("open").removeAttr("role").removeAttr("tabindex").show(),i("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open"),this._removeCloseModalButton(),this._removeApplyFiltersModalButton(),this._switchBackCollapsables(),null===(t=this.$filterButtons)||void 0===t||t.show())}},{key:"_addCloseModalButton",value:function(){var e=i("<a/>",{class:"close-button",html:"&times;","data-dismiss":"modal","aria-label":yith_wcan_shortcodes.labels.close});e.prependTo(this.$preset).on("click",this.closeModal.bind(this)),this.modalElements.closeButton=e}},{key:"_removeCloseModalButton",value:function(){var e,t;null===(e=this.modalElements)||void 0===e||null===(t=e.closeButton)||void 0===t||t.remove()}},{key:"_addApplyFiltersModalButton",value:function(){var e=this,t=i("<button/>",{class:"apply-filters main-modal-button",html:yith_wcan_shortcodes.labels.show_results,"data-dismiss":"modal"});t.appendTo(this.$preset).on("click",(function(){e.filter(),e.closeModal()})),this.modalElements.applyFiltersButton=t}},{key:"_removeApplyFiltersModalButton",value:function(){var e,t;null===(e=this.modalElements)||void 0===e||null===(t=e.applyFiltersButton)||void 0===t||t.remove()}},{key:"_switchToCollapsables",value:function(){var e=this;this.getFilters().each((function(){var t=i(this),a=t.find(".filter-title");a.length&&!a.hasClass("collapsable")&&(a.addClass("collapsable").data("disable-collapse",!0),e._initTitleCollapsable(t))}))}},{key:"_switchBackCollapsables",value:function(){this.getFilters().each((function(){var e=i(this),t=e.find(".filter-title");t.length&&t.hasClass("collapsable")&&t.data("disable-collapse")&&(t.removeClass("collapsable").removeData("disable-collapse",!0).off("click"),e.find(".filter-content").show())}))}},{key:"_openAllCollapsables",value:function(){var e=this;this.$filters.not(".no-title").not((function(t,a){return e.isFilterActive(i(a))})).find(".filter-content").show().end().find(".filter-title").removeClass("closed").addClass("opened")}},{key:"_closeAllCollapsables",value:function(){var e=this;this.$filters.not(".no-title").not((function(t,a){return e.isFilterActive(i(a))})).find(".filter-content").hide().end().find(".filter-title").addClass("closed").removeClass("opened")}},{key:"maybeRegisterStatusChange",value:function(){var e=this.getFiltersProperties(),t=JSON.stringify(e),i=JSON.stringify(this.originalFilters);this.dirty=t!==i}},{key:"maybeFilter",value:function(e){if(this.maybeRegisterStatusChange(),yith_wcan_shortcodes.instant_filters&&!this.isMobile)this.filter();else if(yith_wcan_shortcodes.instant_filters||this.isMobile){if(this.isMobile&&this.dirty){var t;this.$preset.addClass("with-filter-button"),null===(t=this.modalElements.applyFiltersButton)||void 0===t||t.show()}}else{var i,a;this.dirty?null===(i=this.$filterButtons)||void 0===i||i.show():null===(a=this.$filterButtons)||void 0===a||a.hide()}}},{key:"filter",value:function(){var e,t,a,n=this,r=null===(e=window)||void 0===e?void 0:e.product_filter;null==r||null===(t=r.doFilter(this.getFiltersProperties(),this.target,this.preset))||void 0===t||t.done((function(){var e=i(n.preset);if(e.length&&yith_wcan_shortcodes.scroll_top){var t=e.offset().top;if(yith_wcan_shortcodes.scroll_target){var a=i(yith_wcan_shortcodes.scroll_target);t=a.length?a.offset().top:t}else n.isMobile&&(t=100);i("body, html").animate({scrollTop:t-100})}n.originalFilters=n.getFiltersProperties(),n.dirty=!1})),this.isMobile&&(this.$preset.removeClass("with-filter-button"),null===(a=this.modalElements.applyFiltersButton)||void 0===a||a.hide(),this.closeModal())}},{key:"getFilters",value:function(){return!1===this.$filters&&(this.$filters=this.$preset.find(".yith-wcan-filter")),this.$filters}},{key:"getActiveFilters",value:function(){return!1===this.activeFilters&&(this.activeFilters=this.getFiltersProperties()),this.activeFilters}},{key:"isAnyFilterActive",value:function(){return!!Object.keys(this.getActiveFilters()).length}},{key:"isFilterActive",value:function(e){var t,i;switch(e.data("filter-type")){case"tax":case"review":case"price_range":var a=e.find(".filter-dropdown");if(a.length){var n=a.val();t="object"===f(n)?!(null==n||!n.length):!!n;break}case"stock_sale":t=e.find(".filter-item").filter(".active").length;break;case"price_slider":var r=parseFloat(e.find(".price-slider").data("step")),l=parseFloat(e.find(".price-slider").data("min")),s=parseFloat(e.find(".price-slider").data("max")),o=parseFloat(e.find(".price-slider-min").val()),c=parseFloat(e.find(".price-slider-max").val());t=Math.abs(o-l)>=r||Math.abs(c-s)>=r;break;case"orderby":t="menu_order"!==e.find(".filter-order-by").val();break;default:t=!1}return t=void 0!==(i=e.triggerHandler("yith_wcan_is_filter_active",[t,this]))?i:t}},{key:"countActiveItems",value:function(e){var t;switch(e.data("filter-type")){case"tax":case"review":case"price_range":var i=e.find(".filter-dropdown");if(i.length){var a=i.val();t="object"===f(a)?null==a?void 0:a.length:+!!a;break}case"stock_sale":t=e.find(".filter-items").find(".active").length;break;case"orderby":this.isFilterActive(e)&&(t=1);break;case"price_slider":default:t=0}return t}},{key:"getFilterProperties",value:function(e){var t,a,n=e.data("filter-type"),r="yes"===e.data("multiple"),l=e.find(".filter-dropdown"),s={};switch(n){case"tax":var o=[],c=e.data("taxonomy"),h=0===c.indexOf("filter"),d=e.data("relation");if(l.length?r?o=l.val():o.push(l.val()):o=(a=e.find(".filter-item").filter(".active").children("a, label")).get().reduce((function(e,t){var a;return(a=(t=i(t)).is("label")?t.find(":input").val():t.data("term-slug"))?(e.push(a),e):e}),o),r){var u=h||"and"!==d?",":"+";s[c]=o.join(u)}else s[c]=o.pop();h&&(s[c.replace("filter_","query_type_")]=d);break;case"review":l.length?s.rating_filter=l.val():(a=e.find(".filter-item").filter(".active").children("a, label"),r?s.rating_filter=a.get().reduce((function(e,t){var a;return(a=(t=i(t)).is("label")?t.find(":input").val():t.data("rating"))?(e.push(a),e):e}),[]).join(","):(a=a.first(),s.rating_filter=a.is("label")?a.find(":input").val():a.data("rating")));break;case"price_range":l.length?r?s.price_ranges=l.val().join(","):(s.min_price=l.val().split("-")[0],s.max_price=l.val().split("-")[1]):(a=e.find(".filter-item").filter(".active").children("a, label"),r?s.price_ranges=a.get().reduce((function(e,t){var a=i(t).data("range-min"),n=i(t).data("range-max");return e+=(n?"".concat(a,"-").concat(n):a)+","}),"").replace(/^(.*),$/,"$1"):(s.min_price=parseFloat(a.first().data("range-min")),s.max_price=parseFloat(a.first().data("range-max"))));break;case"price_slider":s.min_price=parseFloat(e.find(".price-slider-min").val()),s.max_price=parseFloat(e.find(".price-slider-max").val());break;case"stock_sale":e.find(".filter-on-sale").is(".active")&&(s.onsale_filter=1),e.find(".filter-in-stock").is(".active")&&(s.instock_filter=1),e.find(".filter-featured").is(".active")&&(s.featured_filter=1);break;case"orderby":s.orderby=e.find(".filter-order-by").val()}return s=void 0!==(t=e.triggerHandler("yith_wcan_filter_properties",[s,self]))?t:s}},{key:"getFiltersProperties",value:function(){var e={},t=this;return this.getFilters().each((function(){var a=i(this);if(t.isFilterActive(a)){var n=t.getFilterProperties(a);e=t.mergeProperties(e,n,a)}})),e}},{key:"getFiltersByProperties",value:function(e){var t=this;return this.getFilters().filter((function(){var a=i(this);if(t.isFilterActive(a)){var n=t.getFilterProperties(a),r=!1;for(var l in e){if(["min_price","max_price","price_ranges"].includes(l)&&(n.min_price||n.price_ranges)){r=!0;break}if(n[l]){r=!0;break}}return r}return!1}))}},{key:"maybeToggleClearFilter",value:function(e){this.isFilterActive(e)?this.maybeShowClearFilter(e):this.maybeHideClearFilter(e)}},{key:"maybeToggleClearAllFilters",value:function(){this.isAnyFilterActive()?this.maybeShowClearAllFilters():this.maybeHideClearAllFilters()}},{key:"maybeShowClearFilter",value:function(e){var t=this;this.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&(e.find(".clear-selection").remove(),i("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"}).prependTo(e.find(".filter-content")).on("click",(function(i){i.preventDefault(),t.deactivateFilter(e,!1,yith_wcan_shortcodes.instant_filters),t.maybeHideClearFilter(e),yith_wcan_shortcodes.instant_filters&&t.closeModal()})))}},{key:"maybeShowClearAllFilters",value:function(){var e=this;this.isAnyFilterActive()&&this.isMobile&&(this.$preset.find(".clear-selection").remove(),i("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_all_selections,role:"button"}).prependTo(this.$preset.find(".filters-container")).on("click",(function(t){t.preventDefault(),e.deactivateAllFilters(yith_wcan_shortcodes.instant_filters),e.maybeHideClearAllFilters(),yith_wcan_shortcodes.instant_filters&&e.closeModal()})))}},{key:"maybeHideClearFilter",value:function(e){!this.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&e.find(".clear-selection").remove()}},{key:"maybeHideClearAllFilters",value:function(){this.isAnyFilterActive()||this.$preset.find(".filters-container").children(".clear-selection").remove()}},{key:"deactivateFilter",value:function(e,t,a){var n=e.data("filter-type"),r=e.find(".filter-item"),l=r.filter(".active"),s=e.find(".filter-dropdown");switch(n){case"tax":var o=e.data("taxonomy");s.length?(t?s.find("option").each((function(){var e=i(this);e.val().toString()===t[o].toString()&&e.prop("selected",!1)})):s.find("option").prop("selected",!1),s.change()):t?l.each((function(){var e=i(this),a=e.children("label"),n=e.children("a");(a.length?a.find(":input").val():n.data("term-slug")).toString()===t[o].toString()&&(e.children("label").children("a").click(),e.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"review":s.length?(t?s.find("option").each((function(){var e=i(this);e.val()===t.rating_filter&&e.prop("selected",!1)})):s.find("option").prop("selected",!1),s.change()):t?l.each((function(){var e=i(this),a=e.children("label"),n=e.children("a");(a.length?a.find(":input").val():n.data("rating"))===t.rating_filter&&(e.children("label").children("a").click(),e.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"price_range":s.length?(t?s.find("option").each((function(){var e=i(this),a=t.min_price+(t.max_price?"-".concat(t.max_price):"");e.val()===a&&e.prop("selected",!1)})):s.find("option").prop("selected",!1),s.change()):t?l.each((function(){var e,a,n=i(this),r=n.children("label"),l=n.children("a");a=r.length?r.find(":input").val():l.data("min_price")+(l.data("max_price")?"-"+l.data("max_price"):""),t.min_price?e=t.min_price+(t.max_price?"-"+t.max_price:""):t.price_ranges&&(e=t.price_ranges),a===e&&(n.children("label").children("a").click(),n.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"price_slider":var c=e.find(".price-slider");e.find(".price-slider-min").val(c.data("min")),e.find(".price-slider-max").val(c.data("max")).change();break;case"orderby":e.find("select").val("menu_order");break;case"stock_sale":t?(null!=t&&t.instock_filter&&e.find(".filter-in-stock").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=t&&t.onsale_filter&&e.find(".filter-on-sale").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=t&&t.featured_filter&&e.find(".filter-featured").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active")):(e.find(".filter-in-stock").find(":input").prop("checked",!1).change(),e.find(".filter-on-sale").find(":input").prop("checked",!1).change(),e.find(".filter-featured").find(":input").prop("checked",!1).change(),r.removeClass("active"));break;default:r.removeClass("active")}this.activeFilters=!1,a&&this.filter()}},{key:"deactivateAllFilters",value:function(e){var t=this;return this.getFilters().each((function(){var e=i(this);t.deactivateFilter(e)})),this.activeFilters=!1,e&&this.filter(),!0}},{key:"deactivateFilterByProperties",value:function(e,t){var a=this,n=this.getFiltersByProperties(e);return!!n.length&&(n.each((function(){var n=i(this);a.deactivateFilter(n,e,t)})),!0)}},{key:"openModal",value:function(){var e=this;this.isMobile&&(yith_wcan_shortcodes.toggles_open_on_modal?this._openAllCollapsables():this._closeAllCollapsables(),i("body").css("overflow","hidden").addClass("yith-wcan-preset-modal-open"),this.$preset.show(),setTimeout((function(){e.$preset.addClass("open")}),100))}},{key:"closeModal",value:function(){var e=this;this.isMobile&&(this.$preset.removeClass("open"),setTimeout((function(){e.$preset.hide(),i("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open")}),300))}},{key:"formatPrice",value:function(e){var t,i,a,n;return"undefined"!=typeof accounting&&(e=accounting.formatMoney(e,{symbol:null===(t=yith_wcan_shortcodes.currency_format)||void 0===t?void 0:t.symbol,decimal:null===(i=yith_wcan_shortcodes.currency_format)||void 0===i?void 0:i.decimal,thousand:null===(a=yith_wcan_shortcodes.currency_format)||void 0===a?void 0:a.thousand,precision:0,format:null===(n=yith_wcan_shortcodes.currency_format)||void 0===n?void 0:n.format})),e}},{key:"mergeProperties",value:function(e,t,a){for(var n in t)if(t.hasOwnProperty(n)&&e[n]){switch(n){case"rating_filter":case"min_price":case"max_price":case"onsale_filter":case"instock_filter":case"orderby":e[n]=t[n];break;default:if(0===n.indexOf("query_type_"))e[n]=t[n];else{var r=0===n.indexOf("filter_"),l=r?",":"+",s=e[n].replace(",",l)+l+t[n].replace(",",l);if(s=s.split(l).filter((function(e,t,i){return i.indexOf(e)===t})).join(l),e[n]=s,r){var o=n.replace("filter_","query_type_");e[o]="and",t[o]="and"}}}delete t[n]}return i.extend(e,t),e}}])&&p(t.prototype,a),n&&p(t,n),e}();jQuery((function(e){e(document).on("yith_wcan_init_shortcodes yith_plugin_fw_gutenberg_success_do_shortcode",(function(){e(".yith-wcan-filters").not(".enhanced").each((function(){new _(e(this))})),e(".yith-wcan-reset-filters").not(".enhanced").each((function(){new s(e(this))}))})).trigger("yith_wcan_init_shortcodes"),globalThis.product_filter=new l}))})();